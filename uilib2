--[[
    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    â•‘                    BLOODUI LIBRARY v2.3                          â•‘
    â•‘                      COMPLETE & FIXED                            â•‘
    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
]]

local BloodUI = {}
BloodUI.Windows = {}
BloodUI.Flags = {}
BloodUI.Options = {}
BloodUI.Keybinds = {}
BloodUI.Initialized = false

local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")
local CoreGui = game:GetService("CoreGui")

local Player = Players.LocalPlayer

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- THEMES
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

BloodUI.Themes = {
    Blood = {
        Primary = Color3.fromRGB(139, 0, 0),
        PrimaryLight = Color3.fromRGB(180, 30, 30),
        Background = Color3.fromRGB(18, 14, 14),
        BackgroundSecondary = Color3.fromRGB(28, 22, 22),
        Surface = Color3.fromRGB(38, 30, 30),
        SurfaceHover = Color3.fromRGB(55, 45, 45),
        TextPrimary = Color3.fromRGB(255, 248, 248),
        TextSecondary = Color3.fromRGB(190, 170, 170),
        TextMuted = Color3.fromRGB(130, 110, 110),
        Border = Color3.fromRGB(65, 50, 50),
        ToggleOn = Color3.fromRGB(180, 30, 30),
        ToggleOff = Color3.fromRGB(60, 50, 50),
        SliderFill = Color3.fromRGB(180, 30, 30),
        SliderTrack = Color3.fromRGB(50, 40, 40),
        Success = Color3.fromRGB(50, 180, 50),
        Warning = Color3.fromRGB(220, 180, 30),
        Error = Color3.fromRGB(220, 50, 50),
    },
    Crimson = {
        Primary = Color3.fromRGB(220, 20, 60),
        PrimaryLight = Color3.fromRGB(255, 60, 100),
        Background = Color3.fromRGB(16, 12, 16),
        BackgroundSecondary = Color3.fromRGB(26, 20, 26),
        Surface = Color3.fromRGB(38, 30, 38),
        SurfaceHover = Color3.fromRGB(55, 45, 55),
        TextPrimary = Color3.fromRGB(255, 245, 250),
        TextSecondary = Color3.fromRGB(190, 170, 180),
        TextMuted = Color3.fromRGB(130, 110, 120),
        Border = Color3.fromRGB(65, 50, 60),
        ToggleOn = Color3.fromRGB(220, 40, 80),
        ToggleOff = Color3.fromRGB(60, 50, 55),
        SliderFill = Color3.fromRGB(220, 40, 80),
        SliderTrack = Color3.fromRGB(50, 40, 45),
        Success = Color3.fromRGB(50, 200, 80),
        Warning = Color3.fromRGB(255, 200, 50),
        Error = Color3.fromRGB(255, 60, 60),
    },
    Void = {
        Primary = Color3.fromRGB(100, 60, 160),
        PrimaryLight = Color3.fromRGB(140, 90, 210),
        Background = Color3.fromRGB(14, 12, 20),
        BackgroundSecondary = Color3.fromRGB(22, 18, 32),
        Surface = Color3.fromRGB(32, 28, 48),
        SurfaceHover = Color3.fromRGB(48, 42, 68),
        TextPrimary = Color3.fromRGB(245, 242, 255),
        TextSecondary = Color3.fromRGB(180, 170, 200),
        TextMuted = Color3.fromRGB(120, 110, 140),
        Border = Color3.fromRGB(60, 52, 80),
        ToggleOn = Color3.fromRGB(130, 80, 200),
        ToggleOff = Color3.fromRGB(55, 48, 70),
        SliderFill = Color3.fromRGB(130, 80, 200),
        SliderTrack = Color3.fromRGB(48, 42, 65),
        Success = Color3.fromRGB(80, 200, 120),
        Warning = Color3.fromRGB(255, 200, 80),
        Error = Color3.fromRGB(255, 80, 100),
    }
}

BloodUI.CurrentTheme = "Blood"
BloodUI.Theme = BloodUI.Themes.Blood

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- UTILITY FUNCTIONS
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local function Create(class, props)
    local inst = Instance.new(class)
    for k, v in pairs(props or {}) do
        if k ~= "Parent" then
            inst[k] = v
        end
    end
    if props and props.Parent then
        inst.Parent = props.Parent
    end
    return inst
end

local function Tween(inst, props, duration, style, direction)
    if not inst then return end
    local ti = TweenInfo.new(
        duration or 0.2,
        style or Enum.EasingStyle.Quart,
        direction or Enum.EasingDirection.Out
    )
    local tw = TweenService:Create(inst, ti, props)
    tw:Play()
    return tw
end

local function MakeDraggable(frame, handle)
    local dragging = false
    local dragStart = nil
    local startPos = nil
    
    handle.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = frame.Position
        end
    end)
    
    handle.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = false
        end
    end)
    
    UserInputService.InputChanged:Connect(function(input)
        if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
            local delta = input.Position - dragStart
            frame.Position = UDim2.new(
                startPos.X.Scale,
                startPos.X.Offset + delta.X,
                startPos.Y.Scale,
                startPos.Y.Offset + delta.Y
            )
        end
    end)
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- GLOBAL KEYBIND HANDLER
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local function InitKeybindHandler()
    if BloodUI.Initialized then return end
    BloodUI.Initialized = true
    
    UserInputService.InputBegan:Connect(function(input, processed)
        if processed then return end
        
        if input.UserInputType == Enum.UserInputType.Keyboard then
            local keyName = input.KeyCode.Name
            
            for _, keybind in pairs(BloodUI.Keybinds) do
                if keybind and keybind.Value == keyName and not keybind.Listening then
                    if keybind.Callback then
                        keybind.Callback(keyName)
                    end
                end
            end
        end
    end)
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- NOTIFICATION SYSTEM
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local NotificationContainer = nil

function BloodUI:Notify(config)
    config = config or {}
    local theme = self.Theme
    
    -- Create container if needed
    if not NotificationContainer then
        local screenGui = Create("ScreenGui", {
            Name = "BloodUI_Notifications",
            ResetOnSpawn = false,
            ZIndexBehavior = Enum.ZIndexBehavior.Sibling,
            DisplayOrder = 999999
        })
        
        pcall(function() screenGui.Parent = CoreGui end)
        if not screenGui.Parent then
            screenGui.Parent = Player:WaitForChild("PlayerGui")
        end
        
        NotificationContainer = Create("Frame", {
            Parent = screenGui,
            BackgroundTransparency = 1,
            Position = UDim2.new(1, -20, 0, 20),
            Size = UDim2.new(0, 300, 1, -40),
            AnchorPoint = Vector2.new(1, 0),
        })
        
        Create("UIListLayout", {
            Parent = NotificationContainer,
            SortOrder = Enum.SortOrder.LayoutOrder,
            Padding = UDim.new(0, 10),
            VerticalAlignment = Enum.VerticalAlignment.Top,
        })
    end
    
    local title = config.Title or "Notification"
    local content = config.Content or ""
    local duration = config.Duration or 4
    local notifType = config.Type or "Info"
    
    local typeColors = {
        Success = theme.Success,
        Warning = theme.Warning,
        Error = theme.Error,
        Info = theme.Primary,
        Blood = theme.Primary
    }
    
    local accentColor = typeColors[notifType] or theme.Primary
    
    local notif = Create("Frame", {
        Parent = NotificationContainer,
        BackgroundColor3 = theme.Surface,
        Size = UDim2.new(1, 0, 0, 0),
        ClipsDescendants = true,
    })
    
    Create("UICorner", {Parent = notif, CornerRadius = UDim.new(0, 8)})
    Create("UIStroke", {Parent = notif, Color = accentColor, Thickness = 1, Transparency = 0.3})
    
    -- Accent bar
    Create("Frame", {
        Parent = notif,
        BackgroundColor3 = accentColor,
        Size = UDim2.new(0, 4, 1, -10),
        Position = UDim2.new(0, 5, 0, 5),
    })
    
    -- Title
    Create("TextLabel", {
        Parent = notif,
        BackgroundTransparency = 1,
        Position = UDim2.new(0, 18, 0, 10),
        Size = UDim2.new(1, -60, 0, 18),
        Font = Enum.Font.GothamBold,
        Text = title,
        TextColor3 = theme.TextPrimary,
        TextSize = 14,
        TextXAlignment = Enum.TextXAlignment.Left,
    })
    
    -- Content
    if content ~= "" then
        Create("TextLabel", {
            Parent = notif,
            BackgroundTransparency = 1,
            Position = UDim2.new(0, 18, 0, 30),
            Size = UDim2.new(1, -25, 0, 28),
            Font = Enum.Font.Gotham,
            Text = content,
            TextColor3 = theme.TextSecondary,
            TextSize = 12,
            TextXAlignment = Enum.TextXAlignment.Left,
            TextYAlignment = Enum.TextYAlignment.Top,
            TextWrapped = true,
        })
    end
    
    -- Close button
    local closeBtn = Create("TextButton", {
        Parent = notif,
        BackgroundTransparency = 1,
        Position = UDim2.new(1, -28, 0, 8),
        Size = UDim2.new(0, 20, 0, 20),
        Font = Enum.Font.GothamBold,
        Text = "Ã—",
        TextColor3 = theme.TextMuted,
        TextSize = 18,
    })
    
    -- Progress bar
    local progress = Create("Frame", {
        Parent = notif,
        BackgroundColor3 = accentColor,
        Position = UDim2.new(0, 0, 1, -3),
        Size = UDim2.new(1, 0, 0, 3),
    })
    
    local height = content ~= "" and 68 or 42
    
    -- Animate in
    Tween(notif, {Size = UDim2.new(1, 0, 0, height)}, 0.3, Enum.EasingStyle.Back, Enum.EasingDirection.Out)
    Tween(progress, {Size = UDim2.new(0, 0, 0, 3)}, duration, Enum.EasingStyle.Linear)
    
    local function dismiss()
        Tween(notif, {Size = UDim2.new(1, 0, 0, 0)}, 0.2).Completed:Connect(function()
            notif:Destroy()
        end)
    end
    
    closeBtn.MouseButton1Click:Connect(dismiss)
    closeBtn.MouseEnter:Connect(function()
        closeBtn.TextColor3 = theme.Error
    end)
    closeBtn.MouseLeave:Connect(function()
        closeBtn.TextColor3 = theme.TextMuted
    end)
    
    task.delay(duration, function()
        if notif and notif.Parent then
            dismiss()
        end
    end)
    
    return notif
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- WINDOW
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function BloodUI:CreateWindow(config)
    config = config or {}
    InitKeybindHandler()
    
    local window = {}
    window.Name = config.Name or "BloodUI"
    window.Size = config.Size or UDim2.new(0, 580, 0, 400)
    window.Tabs = {}
    window.ActiveTab = nil
    window.Visible = true
    
    local theme = self.Theme
    
    -- ScreenGui
    window.ScreenGui = Create("ScreenGui", {
        Name = "BloodUI_" .. window.Name:gsub("%s+", ""),
        ResetOnSpawn = false,
        ZIndexBehavior = Enum.ZIndexBehavior.Sibling,
        DisplayOrder = 999998
    })
    
    pcall(function() window.ScreenGui.Parent = CoreGui end)
    if not window.ScreenGui.Parent then
        window.ScreenGui.Parent = Player:WaitForChild("PlayerGui")
    end
    
    -- Main Frame
    window.Main = Create("Frame", {
        Parent = window.ScreenGui,
        BackgroundColor3 = theme.Background,
        Position = UDim2.new(0.5, 0, 0.5, 0),
        Size = UDim2.new(0, 0, 0, 0),
        AnchorPoint = Vector2.new(0.5, 0.5),
        ClipsDescendants = true,
    })
    
    Create("UICorner", {Parent = window.Main, CornerRadius = UDim.new(0, 10)})
    Create("UIStroke", {Parent = window.Main, Color = theme.Border, Thickness = 1})
    
    -- Shadow (optional visual)
    local shadow = Create("ImageLabel", {
        Parent = window.Main,
        BackgroundTransparency = 1,
        Position = UDim2.new(0, -15, 0, -15),
        Size = UDim2.new(1, 30, 1, 30),
        ZIndex = -1,
        Image = "rbxassetid://5028857084",
        ImageColor3 = Color3.new(0, 0, 0),
        ImageTransparency = 0.6,
        ScaleType = Enum.ScaleType.Slice,
        SliceCenter = Rect.new(24, 24, 276, 276),
    })
    
    -- Title Bar
    window.TitleBar = Create("Frame", {
        Parent = window.Main,
        BackgroundColor3 = theme.BackgroundSecondary,
        Size = UDim2.new(1, 0, 0, 42),
        BorderSizePixel = 0,
    })
    
    Create("UICorner", {Parent = window.TitleBar, CornerRadius = UDim.new(0, 10)})
    
    -- Fix bottom corners of title bar
    Create("Frame", {
        Parent = window.TitleBar,
        BackgroundColor3 = theme.BackgroundSecondary,
        Position = UDim2.new(0, 0, 1, -10),
        Size = UDim2.new(1, 0, 0, 10),
        BorderSizePixel = 0,
    })
    
    -- Title Icon
    Create("TextLabel", {
        Parent = window.TitleBar,
        BackgroundTransparency = 1,
        Position = UDim2.new(0, 12, 0.5, 0),
        Size = UDim2.new(0, 24, 0, 24),
        AnchorPoint = Vector2.new(0, 0.5),
        Font = Enum.Font.GothamBold,
        Text = "ğŸ©¸",
        TextSize = 18,
    })
    
    -- Title Text
    Create("TextLabel", {
        Parent = window.TitleBar,
        BackgroundTransparency = 1,
        Position = UDim2.new(0, 40, 0.5, 0),
        Size = UDim2.new(0.5, -40, 0, 20),
        AnchorPoint = Vector2.new(0, 0.5),
        Font = Enum.Font.GothamBold,
        Text = window.Name,
        TextColor3 = theme.TextPrimary,
        TextSize = 15,
        TextXAlignment = Enum.TextXAlignment.Left,
    })
    
    -- Close Button
    local closeBtn = Create("TextButton", {
        Parent = window.TitleBar,
        BackgroundColor3 = theme.Surface,
        Position = UDim2.new(1, -34, 0.5, 0),
        Size = UDim2.new(0, 24, 0, 24),
        AnchorPoint = Vector2.new(0, 0.5),
        Font = Enum.Font.GothamBold,
        Text = "Ã—",
        TextColor3 = theme.TextMuted,
        TextSize = 16,
    })
    Create("UICorner", {Parent = closeBtn, CornerRadius = UDim.new(0, 6)})
    
    closeBtn.MouseButton1Click:Connect(function()
        window:Toggle()
    end)
    
    closeBtn.MouseEnter:Connect(function()
        Tween(closeBtn, {BackgroundColor3 = theme.Error}, 0.15)
        closeBtn.TextColor3 = theme.TextPrimary
    end)
    
    closeBtn.MouseLeave:Connect(function()
        Tween(closeBtn, {BackgroundColor3 = theme.Surface}, 0.15)
        closeBtn.TextColor3 = theme.TextMuted
    end)
    
    -- Make draggable
    MakeDraggable(window.Main, window.TitleBar)
    
    -- Tab Container (Sidebar)
    window.TabContainer = Create("Frame", {
        Parent = window.Main,
        BackgroundColor3 = theme.BackgroundSecondary,
        Position = UDim2.new(0, 0, 0, 42),
        Size = UDim2.new(0, 135, 1, -42),
        BorderSizePixel = 0,
    })
    
    Create("UICorner", {Parent = window.TabContainer, CornerRadius = UDim.new(0, 10)})
    
    -- Fix corners
    Create("Frame", {
        Parent = window.TabContainer,
        BackgroundColor3 = theme.BackgroundSecondary,
        Position = UDim2.new(0, 0, 0, 0),
        Size = UDim2.new(1, 0, 0, 10),
        BorderSizePixel = 0,
    })
    Create("Frame", {
        Parent = window.TabContainer,
        BackgroundColor3 = theme.BackgroundSecondary,
        Position = UDim2.new(1, -10, 0, 0),
        Size = UDim2.new(0, 10, 1, 0),
        BorderSizePixel = 0,
    })
    
    -- Tab List
    window.TabList = Create("ScrollingFrame", {
        Parent = window.TabContainer,
        BackgroundTransparency = 1,
        Position = UDim2.new(0, 8, 0, 10),
        Size = UDim2.new(1, -16, 1, -20),
        CanvasSize = UDim2.new(0, 0, 0, 0),
        ScrollBarThickness = 2,
        ScrollBarImageColor3 = theme.Primary,
        AutomaticCanvasSize = Enum.AutomaticSize.Y,
        ScrollingDirection = Enum.ScrollingDirection.Y,
        BorderSizePixel = 0,
    })
    
    Create("UIListLayout", {
        Parent = window.TabList,
        SortOrder = Enum.SortOrder.LayoutOrder,
        Padding = UDim.new(0, 5),
    })
    
    -- Content Container
    window.ContentContainer = Create("Frame", {
        Parent = window.Main,
        BackgroundTransparency = 1,
        Position = UDim2.new(0, 143, 0, 50),
        Size = UDim2.new(1, -151, 1, -58),
        ClipsDescendants = true,
    })
    
    -- Animate window open
    Tween(window.Main, {Size = window.Size}, 0.35, Enum.EasingStyle.Back, Enum.EasingDirection.Out)
    
    -- Window Methods
    function window:Toggle()
        self.Visible = not self.Visible
        self.Main.Visible = self.Visible
    end
    
    function window:Show()
        self.Visible = true
        self.Main.Visible = true
    end
    
    function window:Hide()
        self.Visible = false
        self.Main.Visible = false
    end
    
    function window:Destroy()
        self.ScreenGui:Destroy()
    end
    
    -- Select Tab Function
    function window:SelectTab(tab)
        -- Deactivate all tabs
        for _, t in ipairs(self.Tabs) do
            t.Active = false
            t.Content.Visible = false
            Tween(t.Button, {BackgroundColor3 = theme.Surface, BackgroundTransparency = 0.3}, 0.2)
            Tween(t.Indicator, {Size = UDim2.new(0, 3, 0, 0)}, 0.2)
            t.Button.TextColor3 = theme.TextSecondary
        end
        
        -- Activate selected tab
        tab.Active = true
        tab.Content.Visible = true
        Tween(tab.Button, {BackgroundColor3 = theme.Primary, BackgroundTransparency = 0}, 0.2)
        Tween(tab.Indicator, {Size = UDim2.new(0, 3, 0, 18)}, 0.2, Enum.EasingStyle.Back)
        tab.Button.TextColor3 = theme.TextPrimary
        
        self.ActiveTab = tab
    end
    
    -- Create Tab Function
    function window:CreateTab(config)
        config = config or {}
        local tab = {}
        tab.Name = config.Name or "Tab"
        tab.Window = self
        tab.Groupboxes = {}
        tab.Active = false
        tab.LayoutOrder = #self.Tabs + 1
        
        -- Tab Button
        tab.Button = Create("TextButton", {
            Parent = self.TabList,
            BackgroundColor3 = theme.Surface,
            BackgroundTransparency = 0.3,
            Size = UDim2.new(1, 0, 0, 34),
            Font = Enum.Font.GothamMedium,
            Text = "  " .. tab.Name,
            TextColor3 = theme.TextSecondary,
            TextSize = 13,
            TextXAlignment = Enum.TextXAlignment.Left,
            LayoutOrder = tab.LayoutOrder,
        })
        
        Create("UICorner", {Parent = tab.Button, CornerRadius = UDim.new(0, 7)})
        Create("UIPadding", {Parent = tab.Button, PaddingLeft = UDim.new(0, 10)})
        
        -- Indicator
        tab.Indicator = Create("Frame", {
            Parent = tab.Button,
            BackgroundColor3 = theme.Primary,
            Position = UDim2.new(0, -7, 0.5, 0),
            Size = UDim2.new(0, 3, 0, 0),
            AnchorPoint = Vector2.new(0, 0.5),
            BorderSizePixel = 0,
        })
        Create("UICorner", {Parent = tab.Indicator, CornerRadius = UDim.new(0, 2)})
        
        -- Content ScrollingFrame
        tab.Content = Create("ScrollingFrame", {
            Parent = self.ContentContainer,
            BackgroundTransparency = 1,
            Size = UDim2.new(1, 0, 1, 0),
            CanvasSize = UDim2.new(0, 0, 0, 0),
            ScrollBarThickness = 3,
            ScrollBarImageColor3 = theme.Primary,
            AutomaticCanvasSize = Enum.AutomaticSize.Y,
            ScrollingDirection = Enum.ScrollingDirection.Y,
            Visible = false,
            BorderSizePixel = 0,
        })
        
        -- Two Column Layout
        tab.LeftColumn = Create("Frame", {
            Parent = tab.Content,
            BackgroundTransparency = 1,
            Position = UDim2.new(0, 0, 0, 0),
            Size = UDim2.new(0.5, -5, 0, 0),
            AutomaticSize = Enum.AutomaticSize.Y,
        })
        Create("UIListLayout", {Parent = tab.LeftColumn, SortOrder = Enum.SortOrder.LayoutOrder, Padding = UDim.new(0, 8)})
        
        tab.RightColumn = Create("Frame", {
            Parent = tab.Content,
            BackgroundTransparency = 1,
            Position = UDim2.new(0.5, 5, 0, 0),
            Size = UDim2.new(0.5, -5, 0, 0),
            AutomaticSize = Enum.AutomaticSize.Y,
        })
        Create("UIListLayout", {Parent = tab.RightColumn, SortOrder = Enum.SortOrder.LayoutOrder, Padding = UDim.new(0, 8)})
        
        -- Button Hover Effects
        tab.Button.MouseEnter:Connect(function()
            if not tab.Active then
                Tween(tab.Button, {BackgroundTransparency = 0.1}, 0.15)
            end
        end)
        
        tab.Button.MouseLeave:Connect(function()
            if not tab.Active then
                Tween(tab.Button, {BackgroundTransparency = 0.3}, 0.15)
            end
        end)
        
        -- Button Click
        tab.Button.MouseButton1Click:Connect(function()
            self:SelectTab(tab)
        end)
        
        -- CreateGroupbox Function
        function tab:CreateGroupbox(cfg)
            cfg = cfg or {}
            return self.Window:CreateGroupbox(self, cfg)
        end
        
        table.insert(self.Tabs, tab)
        
        -- Select first tab automatically
        if #self.Tabs == 1 then
            self:SelectTab(tab)
        end
        
        return tab
    end
    
    -- Create Groupbox Function
    function window:CreateGroupbox(tab, config)
        config = config or {}
        local groupbox = {}
        groupbox.Name = config.Name or "Groupbox"
        groupbox.Side = config.Side or "Left"
        groupbox.Tab = tab
        groupbox.Elements = {}
        groupbox.LayoutOrder = #tab.Groupboxes + 1
        
        local parent = groupbox.Side == "Right" and tab.RightColumn or tab.LeftColumn
        
        groupbox.Container = Create("Frame", {
            Parent = parent,
            BackgroundColor3 = theme.Surface,
            Size = UDim2.new(1, 0, 0, 0),
            AutomaticSize = Enum.AutomaticSize.Y,
            LayoutOrder = groupbox.LayoutOrder,
        })
        
        Create("UICorner", {Parent = groupbox.Container, CornerRadius = UDim.new(0, 8)})
        Create("UIStroke", {Parent = groupbox.Container, Color = theme.Border, Thickness = 1, Transparency = 0.5})
        
        -- Header
        local header = Create("Frame", {
            Parent = groupbox.Container,
            BackgroundTransparency = 1,
            Size = UDim2.new(1, 0, 0, 32),
        })
        
        Create("Frame", {
            Parent = header,
            BackgroundColor3 = theme.Primary,
            Position = UDim2.new(0, 12, 0.5, 0),
            Size = UDim2.new(0, 3, 0, 14),
            AnchorPoint = Vector2.new(0, 0.5),
        })
        
        Create("TextLabel", {
            Parent = header,
            BackgroundTransparency = 1,
            Position = UDim2.new(0, 22, 0.5, 0),
            Size = UDim2.new(1, -30, 0, 18),
            AnchorPoint = Vector2.new(0, 0.5),
            Font = Enum.Font.GothamBold,
            Text = groupbox.Name,
            TextColor3 = theme.TextPrimary,
            TextSize = 13,
            TextXAlignment = Enum.TextXAlignment.Left,
        })
        
        -- Content
        groupbox.Content = Create("Frame", {
            Parent = groupbox.Container,
            BackgroundTransparency = 1,
            Position = UDim2.new(0, 0, 0, 32),
            Size = UDim2.new(1, 0, 0, 0),
            AutomaticSize = Enum.AutomaticSize.Y,
        })
        
        Create("UIListLayout", {Parent = groupbox.Content, SortOrder = Enum.SortOrder.LayoutOrder, Padding = UDim.new(0, 6)})
        Create("UIPadding", {Parent = groupbox.Content, PaddingLeft = UDim.new(0, 12), PaddingRight = UDim.new(0, 12), PaddingBottom = UDim.new(0, 12)})
        
        -- Element Creation Functions
        function groupbox:AddToggle(cfg)
            return self.Tab.Window:CreateToggle(self, cfg)
        end
        
        function groupbox:AddSlider(cfg)
            return self.Tab.Window:CreateSlider(self, cfg)
        end
        
        function groupbox:AddDropdown(cfg)
            return self.Tab.Window:CreateDropdown(self, cfg)
        end
        
        function groupbox:AddButton(cfg)
            return self.Tab.Window:CreateButton(self, cfg)
        end
        
        function groupbox:AddKeybind(cfg)
            return self.Tab.Window:CreateKeybind(self, cfg)
        end
        
        table.insert(tab.Groupboxes, groupbox)
        return groupbox
    end
    
    -- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    -- ELEMENTS
    -- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    -- Toggle
    function window:CreateToggle(groupbox, config)
        config = config or {}
        local toggle = {
            Type = "Toggle",
            Name = config.Name or "Toggle",
            Value = config.Default or false,
            Flag = config.Flag,
            Callback = function() end,
        }
        
        toggle.Container = Create("Frame", {
            Parent = groupbox.Content,
            BackgroundTransparency = 1,
            Size = UDim2.new(1, 0, 0, 26),
            LayoutOrder = #groupbox.Elements + 1,
        })
        
        local label = Create("TextLabel", {
            Parent = toggle.Container,
            BackgroundTransparency = 1,
            Size = UDim2.new(1, -48, 1, 0),
            Font = Enum.Font.Gotham,
            Text = toggle.Name,
            TextColor3 = toggle.Value and theme.TextPrimary or theme.TextSecondary,
            TextSize = 13,
            TextXAlignment = Enum.TextXAlignment.Left,
        })
        
        toggle.Switch = Create("Frame", {
            Parent = toggle.Container,
            BackgroundColor3 = toggle.Value and theme.ToggleOn or theme.ToggleOff,
            Position = UDim2.new(1, -40, 0.5, 0),
            Size = UDim2.new(0, 40, 0, 20),
            AnchorPoint = Vector2.new(0, 0.5),
        })
        Create("UICorner", {Parent = toggle.Switch, CornerRadius = UDim.new(1, 0)})
        
        toggle.Knob = Create("Frame", {
            Parent = toggle.Switch,
            BackgroundColor3 = Color3.new(1, 1, 1),
            Position = toggle.Value and UDim2.new(1, -4, 0.5, 0) or UDim2.new(0, 4, 0.5, 0),
            Size = UDim2.new(0, 14, 0, 14),
            AnchorPoint = Vector2.new(toggle.Value and 1 or 0, 0.5),
        })
        Create("UICorner", {Parent = toggle.Knob, CornerRadius = UDim.new(1, 0)})
        
        local function updateVisual()
            if toggle.Value then
                Tween(toggle.Switch, {BackgroundColor3 = theme.ToggleOn}, 0.2)
                Tween(toggle.Knob, {Position = UDim2.new(1, -4, 0.5, 0), AnchorPoint = Vector2.new(1, 0.5)}, 0.2, Enum.EasingStyle.Back)
                Tween(label, {TextColor3 = theme.TextPrimary}, 0.2)
            else
                Tween(toggle.Switch, {BackgroundColor3 = theme.ToggleOff}, 0.2)
                Tween(toggle.Knob, {Position = UDim2.new(0, 4, 0.5, 0), AnchorPoint = Vector2.new(0, 0.5)}, 0.2, Enum.EasingStyle.Back)
                Tween(label, {TextColor3 = theme.TextSecondary}, 0.2)
            end
        end
        
        local button = Create("TextButton", {
            Parent = toggle.Container,
            BackgroundTransparency = 1,
            Size = UDim2.new(1, 0, 1, 0),
            Text = "",
        })
        
        button.MouseButton1Click:Connect(function()
            toggle.Value = not toggle.Value
            updateVisual()
            toggle.Callback(toggle.Value)
            if toggle.Flag then
                BloodUI.Flags[toggle.Flag] = toggle.Value
            end
        end)
        
        function toggle:SetValue(value)
            self.Value = value
            updateVisual()
            self.Callback(value)
        end
        
        function toggle:OnChanged(callback)
            self.Callback = callback
            return self
        end
        
        if toggle.Flag then
            BloodUI.Flags[toggle.Flag] = toggle.Value
            BloodUI.Options[toggle.Flag] = toggle
        end
        
        table.insert(groupbox.Elements, toggle)
        return toggle
    end
    
    -- Slider
    function window:CreateSlider(groupbox, config)
        config = config or {}
        local slider = {
            Type = "Slider",
            Name = config.Name or "Slider",
            Value = config.Default or config.Min or 0,
            Min = config.Min or 0,
            Max = config.Max or 100,
            Rounding = config.Rounding or 0,
            Suffix = config.Suffix or "",
            Flag = config.Flag,
            Callback = function() end,
        }
        
        slider.Container = Create("Frame", {
            Parent = groupbox.Content,
            BackgroundTransparency = 1,
            Size = UDim2.new(1, 0, 0, 40),
            LayoutOrder = #groupbox.Elements + 1,
        })
        
        Create("TextLabel", {
            Parent = slider.Container,
            BackgroundTransparency = 1,
            Size = UDim2.new(0.65, 0, 0, 18),
            Font = Enum.Font.Gotham,
            Text = slider.Name,
            TextColor3 = theme.TextSecondary,
            TextSize = 13,
            TextXAlignment = Enum.TextXAlignment.Left,
        })
        
        slider.ValueLabel = Create("TextLabel", {
            Parent = slider.Container,
            BackgroundTransparency = 1,
            Position = UDim2.new(1, 0, 0, 0),
            Size = UDim2.new(0.35, 0, 0, 18),
            AnchorPoint = Vector2.new(1, 0),
            Font = Enum.Font.GothamBold,
            Text = tostring(slider.Value) .. slider.Suffix,
            TextColor3 = theme.Primary,
            TextSize = 12,
            TextXAlignment = Enum.TextXAlignment.Right,
        })
        
        slider.Track = Create("Frame", {
            Parent = slider.Container,
            BackgroundColor3 = theme.SliderTrack,
            Position = UDim2.new(0, 0, 0, 24),
            Size = UDim2.new(1, 0, 0, 8),
        })
        Create("UICorner", {Parent = slider.Track, CornerRadius = UDim.new(1, 0)})
        
        local percent = (slider.Value - slider.Min) / (slider.Max - slider.Min)
        
        slider.Fill = Create("Frame", {
            Parent = slider.Track,
            BackgroundColor3 = theme.SliderFill,
            Size = UDim2.new(percent, 0, 1, 0),
        })
        Create("UICorner", {Parent = slider.Fill, CornerRadius = UDim.new(1, 0)})
        
        slider.Knob = Create("Frame", {
            Parent = slider.Track,
            BackgroundColor3 = Color3.new(1, 1, 1),
            Position = UDim2.new(percent, 0, 0.5, 0),
            Size = UDim2.new(0, 14, 0, 14),
            AnchorPoint = Vector2.new(0.5, 0.5),
            ZIndex = 2,
        })
        Create("UICorner", {Parent = slider.Knob, CornerRadius = UDim.new(1, 0)})
        Create("UIStroke", {Parent = slider.Knob, Color = theme.Primary, Thickness = 2})
        
        local dragging = false
        
        local function update(input)
            local rel = math.clamp((input.Position.X - slider.Track.AbsolutePosition.X) / slider.Track.AbsoluteSize.X, 0, 1)
            local value = slider.Min + rel * (slider.Max - slider.Min)
            
            if slider.Rounding == 0 then
                value = math.floor(value)
            else
                value = math.floor(value * 10^slider.Rounding) / 10^slider.Rounding
            end
            
            slider.Value = value
            slider.Fill.Size = UDim2.new(rel, 0, 1, 0)
            slider.Knob.Position = UDim2.new(rel, 0, 0.5, 0)
            slider.ValueLabel.Text = tostring(value) .. slider.Suffix
            slider.Callback(value)
            
            if slider.Flag then
                BloodUI.Flags[slider.Flag] = value
            end
        end
        
        slider.Track.InputBegan:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseButton1 then
                dragging = true
                update(input)
            end
        end)
        
        slider.Track.InputEnded:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseButton1 then
                dragging = false
            end
        end)
        
        UserInputService.InputChanged:Connect(function(input)
            if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
                update(input)
            end
        end)
        
        function slider:SetValue(value)
            self.Value = math.clamp(value, self.Min, self.Max)
            local p = (self.Value - self.Min) / (self.Max - self.Min)
            self.Fill.Size = UDim2.new(p, 0, 1, 0)
            self.Knob.Position = UDim2.new(p, 0, 0.5, 0)
            self.ValueLabel.Text = tostring(self.Value) .. self.Suffix
            self.Callback(self.Value)
        end
        
        function slider:OnChanged(callback)
            self.Callback = callback
            return self
        end
        
        if slider.Flag then
            BloodUI.Flags[slider.Flag] = slider.Value
            BloodUI.Options[slider.Flag] = slider
        end
        
        table.insert(groupbox.Elements, slider)
        return slider
    end
    
    -- Dropdown
    function window:CreateDropdown(groupbox, config)
        config = config or {}
        local dropdown = {
            Type = "Dropdown",
            Name = config.Name or "Dropdown",
            Values = config.Values or {},
            Value = config.Default or (config.Values and config.Values[1]) or "",
            Flag = config.Flag,
            Callback = function() end,
            Open = false,
        }
        
        dropdown.Container = Create("Frame", {
            Parent = groupbox.Content,
            BackgroundTransparency = 1,
            Size = UDim2.new(1, 0, 0, 52),
            ClipsDescendants = false,
            LayoutOrder = #groupbox.Elements + 1,
        })
        
        Create("TextLabel", {
            Parent = dropdown.Container,
            BackgroundTransparency = 1,
            Size = UDim2.new(1, 0, 0, 18),
            Font = Enum.Font.Gotham,
            Text = dropdown.Name,
            TextColor3 = theme.TextSecondary,
            TextSize = 13,
            TextXAlignment = Enum.TextXAlignment.Left,
        })
        
        dropdown.Button = Create("TextButton", {
            Parent = dropdown.Container,
            BackgroundColor3 = theme.BackgroundSecondary,
            Position = UDim2.new(0, 0, 0, 22),
            Size = UDim2.new(1, 0, 0, 28),
            Text = "",
        })
        Create("UICorner", {Parent = dropdown.Button, CornerRadius = UDim.new(0, 6)})
        Create("UIStroke", {Parent = dropdown.Button, Color = theme.Border, Thickness = 1})
        
        dropdown.SelectedLabel = Create("TextLabel", {
            Parent = dropdown.Button,
            BackgroundTransparency = 1,
            Position = UDim2.new(0, 10, 0, 0),
            Size = UDim2.new(1, -35, 1, 0),
            Font = Enum.Font.Gotham,
            Text = tostring(dropdown.Value),
            TextColor3 = theme.TextSecondary,
            TextSize = 12,
            TextXAlignment = Enum.TextXAlignment.Left,
            TextTruncate = Enum.TextTruncate.AtEnd,
        })
        
        local arrow = Create("TextLabel", {
            Parent = dropdown.Button,
            BackgroundTransparency = 1,
            Position = UDim2.new(1, -22, 0.5, 0),
            Size = UDim2.new(0, 16, 0, 16),
            AnchorPoint = Vector2.new(0, 0.5),
            Font = Enum.Font.GothamBold,
            Text = "â–¼",
            TextColor3 = theme.TextMuted,
            TextSize = 10,
        })
        
        dropdown.OptionsFrame = Create("Frame", {
            Parent = dropdown.Container,
            BackgroundColor3 = theme.BackgroundSecondary,
            Position = UDim2.new(0, 0, 0, 52),
            Size = UDim2.new(1, 0, 0, 0),
            ClipsDescendants = true,
            ZIndex = 100,
            Visible = false,
        })
        Create("UICorner", {Parent = dropdown.OptionsFrame, CornerRadius = UDim.new(0, 6)})
        Create("UIStroke", {Parent = dropdown.OptionsFrame, Color = theme.Border, Thickness = 1})
        
        dropdown.OptionsList = Create("ScrollingFrame", {
            Parent = dropdown.OptionsFrame,
            BackgroundTransparency = 1,
            Size = UDim2.new(1, 0, 1, 0),
            CanvasSize = UDim2.new(0, 0, 0, 0),
            ScrollBarThickness = 2,
            ScrollBarImageColor3 = theme.Primary,
            AutomaticCanvasSize = Enum.AutomaticSize.Y,
            ZIndex = 101,
        })
        Create("UIListLayout", {Parent = dropdown.OptionsList, Padding = UDim.new(0, 2)})
        Create("UIPadding", {Parent = dropdown.OptionsList, PaddingTop = UDim.new(0, 4), PaddingBottom = UDim.new(0, 4), PaddingLeft = UDim.new(0, 4), PaddingRight = UDim.new(0, 4)})
        
        local function refreshOptions()
            for _, child in ipairs(dropdown.OptionsList:GetChildren()) do
                if child:IsA("TextButton") then
                    child:Destroy()
                end
            end
            
            for _, value in ipairs(dropdown.Values) do
                local option = Create("TextButton", {
                    Parent = dropdown.OptionsList,
                    BackgroundColor3 = theme.Surface,
                    BackgroundTransparency = 1,
                    Size = UDim2.new(1, -8, 0, 26),
                    Font = Enum.Font.Gotham,
                    Text = value,
                    TextColor3 = theme.TextSecondary,
                    TextSize = 12,
                    ZIndex = 102,
                })
                Create("UICorner", {Parent = option, CornerRadius = UDim.new(0, 4)})
                
                option.MouseEnter:Connect(function()
                    Tween(option, {BackgroundTransparency = 0, BackgroundColor3 = theme.SurfaceHover}, 0.1)
                end)
                
                option.MouseLeave:Connect(function()
                    Tween(option, {BackgroundTransparency = 1}, 0.1)
                end)
                
                option.MouseButton1Click:Connect(function()
                    dropdown.Value = value
                    dropdown.SelectedLabel.Text = value
                    dropdown:Close()
                    dropdown.Callback(value)
                    if dropdown.Flag then
                        BloodUI.Flags[dropdown.Flag] = value
                    end
                end)
            end
        end
        
        refreshOptions()
        
        function dropdown:Toggle()
            self.Open = not self.Open
            if self.Open then
                self.OptionsFrame.Visible = true
                local height = math.min(#self.Values * 28 + 10, 130)
                Tween(self.OptionsFrame, {Size = UDim2.new(1, 0, 0, height)}, 0.2, Enum.EasingStyle.Back)
                Tween(arrow, {Rotation = 180}, 0.2)
            else
                Tween(self.OptionsFrame, {Size = UDim2.new(1, 0, 0, 0)}, 0.15).Completed:Connect(function()
                    if not self.Open then
                        self.OptionsFrame.Visible = false
                    end
                end)
                Tween(arrow, {Rotation = 0}, 0.2)
            end
        end
        
        function dropdown:Close()
            if self.Open then
                self:Toggle()
            end
        end
        
        function dropdown:SetValues(values)
            self.Values = values
            refreshOptions()
        end
        
        function dropdown:OnChanged(callback)
            self.Callback = callback
            return self
        end
        
        dropdown.Button.MouseButton1Click:Connect(function()
            dropdown:Toggle()
        end)
        
        if dropdown.Flag then
            BloodUI.Flags[dropdown.Flag] = dropdown.Value
            BloodUI.Options[dropdown.Flag] = dropdown
        end
        
        table.insert(groupbox.Elements, dropdown)
        return dropdown
    end
    
    -- Button
    function window:CreateButton(groupbox, config)
        config = config or {}
        local button = {
            Type = "Button",
            Text = config.Text or "Button",
            Callback = config.Callback or function() end,
            DoubleConfirm = config.DoubleConfirm or false,
        }
        
        local awaitingConfirm = false
        
        button.Container = Create("Frame", {
            Parent = groupbox.Content,
            BackgroundTransparency = 1,
            Size = UDim2.new(1, 0, 0, 32),
            LayoutOrder = #groupbox.Elements + 1,
        })
        
        button.Button = Create("TextButton", {
            Parent = button.Container,
            BackgroundColor3 = theme.Surface,
            Size = UDim2.new(1, 0, 0, 30),
            Font = Enum.Font.GothamMedium,
            Text = button.Text,
            TextColor3 = theme.TextPrimary,
            TextSize = 13,
        })
        Create("UICorner", {Parent = button.Button, CornerRadius = UDim.new(0, 6)})
        Create("UIStroke", {Parent = button.Button, Color = theme.Border, Thickness = 1})
        
        button.Button.MouseEnter:Connect(function()
            Tween(button.Button, {BackgroundColor3 = theme.SurfaceHover}, 0.1)
        end)
        
        button.Button.MouseLeave:Connect(function()
            Tween(button.Button, {BackgroundColor3 = theme.Surface}, 0.1)
            if awaitingConfirm then
                awaitingConfirm = false
                button.Button.Text = button.Text
            end
        end)
        
        button.Button.MouseButton1Click:Connect(function()
            if button.DoubleConfirm and not awaitingConfirm then
                awaitingConfirm = true
                button.Button.Text = "Click again to confirm"
                task.delay(2, function()
                    if awaitingConfirm then
                        awaitingConfirm = false
                        button.Button.Text = button.Text
                    end
                end)
                return
            end
            
            awaitingConfirm = false
            button.Button.Text = button.Text
            
            Tween(button.Button, {BackgroundColor3 = theme.Primary}, 0.1)
            task.delay(0.15, function()
                Tween(button.Button, {BackgroundColor3 = theme.Surface}, 0.1)
            end)
            
            button.Callback()
        end)
        
        table.insert(groupbox.Elements, button)
        return button
    end
    
    -- Keybind (Ğ˜Ğ¡ĞŸĞ ĞĞ’Ğ›Ğ•ĞĞĞ«Ğ™)
    function window:CreateKeybind(groupbox, config)
        config = config or {}
        local keybind = {
            Type = "Keybind",
            Name = config.Name or "Keybind",
            Value = config.Default or "None",
            Flag = config.Flag,
            Callback = function() end,
            Listening = false,
        }
        
        keybind.Container = Create("Frame", {
            Parent = groupbox.Content,
            BackgroundTransparency = 1,
            Size = UDim2.new(1, 0, 0, 26),
            LayoutOrder = #groupbox.Elements + 1,
        })
        
        Create("TextLabel", {
            Parent = keybind.Container,
            BackgroundTransparency = 1,
            Size = UDim2.new(1, -70, 1, 0),
            Font = Enum.Font.Gotham,
            Text = keybind.Name,
            TextColor3 = theme.TextSecondary,
            TextSize = 13,
            TextXAlignment = Enum.TextXAlignment.Left,
        })
        
        keybind.Button = Create("TextButton", {
            Parent = keybind.Container,
            BackgroundColor3 = theme.Surface,
            Position = UDim2.new(1, -65, 0.5, 0),
            Size = UDim2.new(0, 65, 0, 22),
            AnchorPoint = Vector2.new(0, 0.5),
            Font = Enum.Font.GothamMedium,
            Text = keybind.Value,
            TextColor3 = theme.TextMuted,
            TextSize = 11,
        })
        Create("UICorner", {Parent = keybind.Button, CornerRadius = UDim.new(0, 5)})
        
        keybind.Button.MouseButton1Click:Connect(function()
            keybind.Listening = true
            keybind.Button.Text = "..."
            Tween(keybind.Button, {BackgroundColor3 = theme.Primary}, 0.1)
        end)
        
        -- Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸Ğº Ğ´Ğ»Ñ Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸ Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾ ĞºĞµĞ¹Ğ±Ğ¸Ğ½Ğ´Ğ°
        UserInputService.InputBegan:Connect(function(input, processed)
            if not keybind.Listening then return end
            
            if input.UserInputType == Enum.UserInputType.Keyboard then
                local keyName = input.KeyCode.Name
                keybind.Value = keyName
                keybind.Button.Text = keyName
                keybind.Listening = false
                Tween(keybind.Button, {BackgroundColor3 = theme.Surface}, 0.1)
                
                if keybind.Flag then
                    BloodUI.Flags[keybind.Flag] = keyName
                end
            end
        end)
        
        function keybind:SetValue(value)
            self.Value = value
            self.Button.Text = value
            if self.Flag then
                BloodUI.Flags[self.Flag] = value
            end
        end
        
        function keybind:OnCallback(callback)
            self.Callback = callback
            return self
        end
        
        -- Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ¸Ñ€ÑƒĞµĞ¼ Ğ² Ğ³Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ğ¾Ğ¼ ÑĞ¿Ğ¸ÑĞºĞµ ĞºĞµĞ¹Ğ±Ğ¸Ğ½Ğ´Ğ¾Ğ²
        table.insert(BloodUI.Keybinds, keybind)
        
        if keybind.Flag then
            BloodUI.Flags[keybind.Flag] = keybind.Value
            BloodUI.Options[keybind.Flag] = keybind
        end
        
        table.insert(groupbox.Elements, keybind)
        return keybind
    end
    
    table.insert(BloodUI.Windows, window)
    return window
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- GLOBAL METHODS
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function BloodUI:SetTheme(themeName)
    if self.Themes[themeName] then
        self.CurrentTheme = themeName
        self.Theme = self.Themes[themeName]
    end
end

function BloodUI:Destroy()
    for _, window in pairs(self.Windows) do
        pcall(function()
            window:Destroy()
        end)
    end
    self.Windows = {}
    self.Keybinds = {}
end

return BloodUI
